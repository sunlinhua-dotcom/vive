(function(){"use strict";self.onmessage=async i=>{const{file:r,maxWidth:a,quality:c}=i.data;try{const s=await createImageBitmap(r);let e=s.width,t=s.height;e>t?e>a&&(t=Math.round(t*a/e),e=a):t>a&&(e=Math.round(e*a/t),t=a);const n=new OffscreenCanvas(e,t);n.getContext("2d").drawImage(s,0,0,e,t);const l=await n.convertToBlob({type:"image/jpeg",quality:c}),o=new FileReader;o.onloadend=()=>{self.postMessage({base64:o.result})},o.readAsDataURL(l),s.close()}catch(s){self.postMessage({error:s.message})}}})();
